<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login GOV</title>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAlXIQ42acjO8xZH-Ti__YL6h9SGQQKQto",
  authDomain: "govminer.firebaseapp.com",
  projectId: "govminer",
  storageBucket: "govminer.firebasestorage.app",
  messagingSenderId: "408110658500",
  appId: "1:408110658500:web:3fe7f4bd9a35f3fe726a91"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// JIKA SUDAH LOGIN â†’ DASHBOARD
onAuthStateChanged(auth, user => {
  if(user){
    location.replace("dashboard.html");
  }
});

window.login = async () => {
  try {
    await signInWithEmailAndPassword(
      auth,
      email.value,
      password.value
    );
  } catch (e) {
    alert(e.message);
  }
};

window.register = async () => {
  try {
    await createUserWithEmailAndPassword(
      auth,
      regEmail.value,
      regPassword.value
    );
    alert("Daftar berhasil, silakan login");
    showLogin();
  } catch (e) {
    alert(e.message);
  }
};
</script>

<style>
body{background:#f9f6ee;font-family:Arial;text-align:center}
.box{background:#fff;width:280px;margin:80px auto;padding:20px;border-radius:8px}
input,button{width:100%;padding:10px;margin-top:10px}
button{background:#1877f2;color:#fff;border:none}
a{color:#1877f2;cursor:pointer;display:block;margin-top:10px}
</style>
</head>

<body>

<div class="box" id="loginBox">
  <h3>LOGIN</h3>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <a onclick="showRegister()">Daftar</a>
</div>

<div class="box" id="registerBox" style="display:none">
  <h3>DAFTAR</h3>
  <input id="regEmail" placeholder="Email">
  <input id="regPassword" type="password" placeholder="Password">
  <button onclick="register()">Daftar</button>
  <a onclick="showLogin()">Login</a>
</div>

<script>
function showRegister(){
  loginBox.style.display="none";
  registerBox.style.display="block";
}
function showLogin(){
  registerBox.style.display="none";
  loginBox.style.display="block";
}
</script>

</body>
</html>
