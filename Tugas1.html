<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tugas & Bonus Harian</title>

<style>
body{
  background:#f1f8e9;
  font-family:Arial, sans-serif;
  margin:0;
  padding:20px;
}

h2{
  text-align:center;
  margin-bottom:10px;
}

.balance{
  background:#fff3cd;
  padding:12px;
  border-radius:12px;
  text-align:center;
  font-weight:bold;
  margin-bottom:15px;
}

.task{
  background:white;
  padding:15px;
  border-radius:14px;
  margin-bottom:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 8px rgba(0,0,0,.1);
}

.task button{
  background:#7f5af0;
  color:white;
  border:none;
  padding:8px 16px;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}

.task button:disabled{
  background:#ccc;
}

#bonusBox{
  margin-top:20px;
  display:none;
}

#bonusBox button{
  width:100%;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:14px;
  background:#4caf50;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.back-box{
  margin-top:25px;
}

.back-box button{
  width:100%;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:14px;
  background:#2196f3;
  color:white;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>üìã Tugas Harian</h2>

<div class="balance">
üí∞ Saldo GOV: <span id="saldo">0</span>
</div>

<div class="task">
  <span><span id="check1">‚¨ú</span> Follow TikTok</span>
  <button id="btn1" onclick="doTask(1,'https://www.tiktok.com')">Kerjakan</button>
</div>

<div class="task">
  <span><span id="check2">‚¨ú</span> Follow Twitter</span>
  <button id="btn2" onclick="doTask(2,'https://twitter.com')">Kerjakan</button>
</div>

<div class="task">
  <span><span id="check3">‚¨ú</span> Follow YouTube</span>
  <button id="btn3" onclick="doTask(3,'https://youtube.com')">Kerjakan</button>
</div>

<div class="task">
  <span><span id="check4">‚¨ú</span> Like Twitter</span>
  <button id="btn4" onclick="doTask(4,'https://x.com')">Kerjakan</button>
</div>

<div class="task">
  <span><span id="check5">‚¨ú</span> Sukai TikTok</span>
  <button id="btn5" onclick="doTask(5,'https://www.tiktok.com')">Kerjakan</button>
</div>

<!-- BONUS -->
<div id="bonusBox">
  <button onclick="claimBonus()">üéÅ Klaim Bonus Harian 2 USDT</button>
</div>

<!-- BACK -->
<div class="back-box">
  <button onclick="goDashboard()">‚¨ÖÔ∏è Kembali ke Dashboard</button>
</div>

<script>
/* ================= USER (OPSIONAL) =================
   Jika ada user_id ‚Üí dipakai
   Jika tidak ada ‚Üí pakai guest
=================================================== */
const USER_ID = localStorage.getItem("user_id") || "guest";

/* ================= DATE ================= */
const today = new Date().toISOString().slice(0,10);

/* ================= STORAGE ================= */
const saldoKey = `saldo_usdt_${USER_ID}`;
const bonusKey = `bonus_${USER_ID}_${today}`;

/* ================= SALDO ================= */
let saldo = parseInt(localStorage.getItem(saldoKey)) || 0;
document.getElementById("saldo").innerText = saldo;

/* ================= LOAD TASK ================= */
window.onload = () => {
  for(let i=1;i<=5;i++){
    const key = `task_${i}_${USER_ID}_${today}`;
    if(localStorage.getItem(key) === "done"){
      setDone(i);
    }
  }
  checkAllDone();
};

/* ================= TASK ================= */
function doTask(no, link){
  window.open(link, "_blank");

  setTimeout(() => {
    const key = `task_${no}_${USER_ID}_${today}`;
    localStorage.setItem(key, "done");
    setDone(no);
    checkAllDone();
  }, 5000);
}

function setDone(no){
  document.getElementById("check"+no).innerHTML = "‚úÖ";
  const btn = document.getElementById("btn"+no);
  btn.innerText = "Selesai";
  btn.disabled = true;
}

function checkAllDone(){
  let done = true;
  for(let i=1;i<=5;i++){
    if(localStorage.getItem(`task_${i}_${USER_ID}_${today}`) !== "done"){
      done = false;
    }
  }
  if(done && !localStorage.getItem(bonusKey)){
    document.getElementById("bonusBox").style.display = "block";
  }
}

/* ================= BONUS ================= */
function claimBonus(){
  if(localStorage.getItem(bonusKey)){
    alert("Bonus hari ini sudah diklaim");
    return;
  }

  saldo += 2;
  localStorage.setItem(saldoKey, saldo);
  localStorage.setItem(bonusKey, "claimed");

  document.getElementById("saldo").innerText = saldo;
  document.getElementById("bonusBox").style.display = "none";

  alert("üéâ Bonus 2 USDT berhasil diklaim!");
}

/* ================= DASHBOARD ================= */
function goDashboard(){
  window.location.href = "dashboard.html";
}
</script>

</body>
</html>
