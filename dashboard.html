<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <style>
    body {
      background-color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    .box {
      background-color: white;
      padding: 20px;
      margin: auto;
      width: 90%;
      max-width: 400px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="box">
    <h2>Selamat Datang, <span id="username"></span></h2>
    <p>Poin Harian: <span id="dailyPoints">0</span></p>
    <p>Total Reward: <span id="totalReward">0</span></p>
    <button onclick="claimPoints()">Klaim Poin</button>
    <button onclick="logout()">Keluar</button>
  </div>

  <script>
    const username = localStorage.getItem("username");
    const lastClaimTime = localStorage.getItem("lastClaimTime");
    const now = new Date().getTime();

    if (!username) {
      window.location.href = "index.html";
    } else {
      document.getElementById("username").innerText = username;
    }

    let dailyPoints = parseInt(localStorage.getItem("dailyPoints")) || 0;
    let totalReward = parseInt(localStorage.getItem("totalReward")) || 0;

    if (lastClaimTime) {
      const elapsed = now - parseInt(lastClaimTime);
      if (elapsed >= 24 * 60 * 60 * 1000) {
        // 24 jam sudah lewat
        totalReward += dailyPoints;
        localStorage.setItem("totalReward", totalReward);
        localStorage.setItem("dailyPoints", 0);
        localStorage.removeItem("lastClaimTime");
        dailyPoints = 0;
      }
    }

    document.getElementById("dailyPoints").innerText = dailyPoints;
    document.getElementById("totalReward").innerText = totalReward;

    function claimPoints() {
      const lastClaimTime = localStorage.getItem("lastClaimTime");
      const now = new Date().getTime();
      if (lastClaimTime && now - parseInt(lastClaimTime) < 24 * 60 * 60 * 1000) {
        alert("Sudah klaim hari ini, silakan tunggu 24 jam.");
        return;
      }
      dailyPoints = 100;
      localStorage.setItem("dailyPoints", dailyPoints);
      localStorage.setItem("lastClaimTime", now);
      document.getElementById("dailyPoints").innerText = dailyPoints;
      alert("Berhasil klaim 100 poin hari ini!");
    }

    function logout() {
      localStorage.clear();
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
